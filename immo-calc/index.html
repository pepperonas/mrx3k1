<!DOCTYPE html>
<html lang="de">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Immobilien-Komplettrechner</title>
    <link rel="stylesheet" href="style.css">

    <!-- Open Graph Meta Tags f√ºr Link-Vorschau -->
    <meta property="og:title" content="Immobilien-Komplettrechner">
    <meta property="og:description" content="Made with ‚ù§Ô∏è by Martin Pfeffer">
    <meta property="og:image" content="immo.jpg">
    <meta property="og:type" content="website">

    <!-- Twitter Card Tags f√ºr Twitter-Vorschau -->
    <meta name="twitter:card" content="summary_large_image">
    <meta name="twitter:title" content="Immobilien-Komplettrechner">
    <meta name="twitter:description" content="Made with ‚ù§Ô∏è by Martin Pfeffer">
    <meta name="twitter:image" content="immo.jpg">

    <!-- Favicon -->
    <link rel="icon" href="favicon.ico" type="image/x-icon">
    <link rel="shortcut icon" href="favicon.ico" type="image/x-icon">
    <!-- Zus√§tzliche Favicon f√ºr moderne Browser und Ger√§te -->
    <link rel="apple-touch-icon" sizes="180x180" href="apple-touch-icon.png">
    <link rel="icon" type="image/png" sizes="32x32" href="favicon-32x32.png">
    <link rel="icon" type="image/png" sizes="16x16" href="favicon-16x16.png">

    <style>
        :root {
            --primary-color: #1F1F2B;
            --secondary-color: #2C2C3E;
            --background-color: #121218;
            --white: #ffffff;
            --text-color: #E0E0E0;
            --accent-blue: #4A90E2;
            --accent-green: #2ECC71;
            --accent-orange: #F39C12;
            --accent-purple: #9B59B6;
            --accent-red: #E74C3C;
        }

        body {
            font-family: 'Segoe UI', sans-serif;
            background: var(--background-color);
            margin: 0;
            padding: 40px;
            color: var(--text-color);
        }

        .container {
            max-width: 950px;
            margin: auto;
            background: var(--primary-color);
            border-radius: 16px;
            box-shadow: 0 12px 24px rgba(0, 0, 0, 0.3);
            padding: 40px;
        }

        h1 {
            text-align: center;
            color: var(--white);
            margin-bottom: 32px;
            font-weight: 700;
        }

        .section {
            margin-bottom: 32px;
        }

        label {
            display: block;
            font-weight: 600;
            margin-bottom: 6px;
            color: var(--text-color);
        }

        input {
            width: 100%;
            padding: 10px;
            font-size: 1rem;
            border: 1px solid var(--secondary-color);
            border-radius: 8px;
            margin-bottom: 16px;
            background-color: #2C2C3E;
            color: var(--white);
            transition: border-color 0.3s ease;
        }

        input:focus {
            outline: none;
            border-color: var(--accent-blue);
            box-shadow: 0 0 0 3px rgba(74, 144, 226, 0.2);
        }

        .result {
            background: var(--accent-green);
            color: var(--white);
            padding: 16px;
            border-radius: 8px;
            font-weight: bold;
            font-size: 1.1rem;
            margin-bottom: 10px;
        }

        .formel, .note {
            font-size: 0.9rem;
            color: #A0A0A0;
            margin-bottom: 16px;
        }

        .box {
            padding: 16px;
            border-radius: 8px;
            font-weight: bold;
            margin-bottom: 10px;
        }

        .netto-box {
            background: var(--accent-orange);
            color: var(--white);
        }

        .tilgung-box {
            background: var(--accent-blue);
            color: var(--white);
        }

        .wert-box {
            background: var(--accent-purple);
            color: var(--white);
        }

        .break-even-box {
            background: var(--accent-red);
            color: var(--white);
        }

        @media (max-width: 600px) {
            body {
                padding: 20px;
            }

            .container {
                padding: 20px;
            }
        }
    </style>
</head>
<body>
<div class="container">
    <h1>üè° Immobilien-Komplettrechner</h1>

    <div class="section">
        <label>Kaufpreis (‚Ç¨)</label>
        <input type="number" id="kaufpreis" value="130000"/>

        <label>Nebenkosten (‚Ç¨)</label>
        <input type="number" id="nebenkosten" value="11120"/>

        <label>Eigenkapital (‚Ç¨)</label>
        <input type="number" id="eigenkapital" value="30000"/>

        <label>Zinssatz (% p.a.)</label>
        <input type="number" id="zins" value="3.5" step="0.1"/>

        <label>Monatliche Kreditrate (‚Ç¨)</label>
        <input type="number" id="rate" value="600"/>

        <label>Monatliche Kaltmiete (‚Ç¨)</label>
        <input type="number" id="miete" value="550"/>

        <label>Nicht umlagef√§hige Nebenkosten (‚Ç¨ / Monat)</label>
        <input type="number" id="nichtumlage" value="80"/>

        <label>Wertsteigerung p.a. (%)</label>
        <input type="number" id="steigerung" value="2.5" step="0.1"/>
    </div>

    <div class="section">
        <div class="result">üí∏ Gesamtkosten: <span id="gesamtkosten"></span></div>
        <div class="result">üí∞ Fremdfinanzierung: <span id="fremdfinanzierung"></span></div>
    </div>

    <div class="section">
        <div class="result" id="bruttoRendite">Bruttorendite: ...</div>
        <div class="formel" id="formelBrutto"></div>

        <div class="result netto-box" id="nettoRendite">Nettorendite: ...</div>
        <div class="formel" id="formelNetto"></div>
    </div>

    <div class="section">
        <div class="box tilgung-box" id="tilgungsinfo">‚è≥ Tilgung oder Break-even: ...</div>
        <div class="formel" id="tilgungsformel">...</div>

        <div class="box break-even-box" id="breakEvenBox">üìà Break-even-Berechnung ...</div>
    </div>

    <div class="section">
        <div class="box wert-box" id="wertentwicklung">üìà Marktwert in 10 Jahren: ...</div>
        <div class="formel" id="wertverhaeltnis">...</div>
    </div>
</div>

<script>
    function get(id) {
        return document.getElementById(id);
    }

    function formatEuro(value) {
        return value.toLocaleString("de-DE", {style: "currency", currency: "EUR"});
    }

    function update() {
        const kaufpreis = parseFloat(get("kaufpreis").value) || 0;
        const nebenkosten = parseFloat(get("nebenkosten").value) || 0;
        const eigenkapital = parseFloat(get("eigenkapital").value) || 0;
        const rate = parseFloat(get("rate").value) || 1;
        const zinssatz = parseFloat(get("zins").value) / 100 || 0;
        const miete = parseFloat(get("miete").value) || 0;
        const nichtumlage = parseFloat(get("nichtumlage").value) || 0;
        const steigerung = parseFloat(get("steigerung").value) || 0;

        const gesamtkosten = kaufpreis + nebenkosten;
        const darlehen = Math.max(0, gesamtkosten - eigenkapital);
        const mieteJahr = miete * 12;
        const nuJahr = nichtumlage * 12;
        const nettoEinnahme = mieteJahr - nuJahr;

        const brutto = (mieteJahr / gesamtkosten) * 100;
        const netto = (nettoEinnahme / gesamtkosten) * 100;

        get("gesamtkosten").textContent = formatEuro(gesamtkosten);
        get("fremdfinanzierung").textContent = formatEuro(darlehen);
        get("bruttoRendite").textContent = `Bruttorendite: ${brutto.toFixed(2)} %`;
        get("nettoRendite").textContent = `Nettorendite: ${netto.toFixed(2)} %`;
        get("formelBrutto").textContent = `(${formatEuro(mieteJahr)} √∑ ${formatEuro(gesamtkosten)}) √ó 100`;
        get("formelNetto").textContent = `(${formatEuro(mieteJahr)} ‚Äì ${formatEuro(nuJahr)} √∑ ${formatEuro(gesamtkosten)}) √ó 100`;

        const tilgungsinfo = get("tilgungsinfo");
        const tilgungsformel = get("tilgungsformel");
        const breakEvenBox = get("breakEvenBox");

        if (darlehen > 0) {
            let rest = darlehen;
            const zinsmonat = zinssatz / 12;
            let monate = 0;
            let gezahlt = 0;

            while (rest > 0 && monate < 600) {
                const zinsen = rest * zinsmonat;
                const tilgung = rate - zinsen;
                if (tilgung <= 0) break;
                rest -= tilgung;
                gezahlt += rate;
                monate++;
            }

            const jahre = monate / 12;
            const jahrFertig = new Date().getFullYear() + Math.ceil(jahre);
            tilgungsinfo.textContent = `‚è≥ Abgezahlt in ca. ${jahre.toFixed(1)} Jahren`;
            tilgungsformel.textContent = `Annuit√§t mit ${zinssatz.toFixed(2)} % Zins berechnet ‚Üí fertig ca. ${jahrFertig}`;

            const kapitaldienst = gezahlt;
            const breakEvenJahre = kapitaldienst / nettoEinnahme;
            const breakEvenJahr = new Date().getFullYear() + Math.ceil(breakEvenJahre);

            if (nettoEinnahme <= 0) {
                breakEvenBox.textContent = `‚ö†Ô∏è Kein Break-even m√∂glich: Netto-Mieteinnahmen reichen nicht aus.`;
            } else {
                breakEvenBox.textContent = `üíº Break-even mit Finanzierung: nach ${breakEvenJahre.toFixed(1)} Jahren ‚Üí ca. ${breakEvenJahr}`;
            }
        } else {
            const breakEvenJahre = gesamtkosten / nettoEinnahme;
            const breakEvenJahr = new Date().getFullYear() + Math.ceil(breakEvenJahre);
            tilgungsinfo.textContent = `üíº Break-even (Eigenkauf): nach ${breakEvenJahre.toFixed(1)} Jahren ‚Üí ca. ${breakEvenJahr}`;
            tilgungsformel.textContent = `Gesamtkosten √∑ Netto-Mietertrag = ${gesamtkosten} √∑ ${nettoEinnahme.toFixed(2)} = ${breakEvenJahre.toFixed(1)} Jahre`;
            breakEvenBox.textContent = '';
        }

        const faktor = Math.pow(1 + steigerung / 100, 10);
        const zukunftswert = kaufpreis * faktor;
        get("wertentwicklung").textContent = `üìà Marktwert in 10 Jahren: ${formatEuro(zukunftswert)}`;
        get("wertverhaeltnis").textContent = `+${(zukunftswert - kaufpreis).toLocaleString("de-DE", {
            style: "currency",
            currency: "EUR"
        })} (${((faktor - 1) * 100).toFixed(1)} % Steigerung)`;
    }

    ["kaufpreis", "nebenkosten", "eigenkapital", "rate", "zins", "miete", "nichtumlage", "steigerung"]
        .forEach(id => get(id).addEventListener("input", update));

    update();
</script>
</body>
</html>